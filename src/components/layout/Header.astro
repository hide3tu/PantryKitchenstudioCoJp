---
import Navigation from "./Navigation.astro";

const currentPath = Astro.url.pathname;
---

<header class="fixed top-0 left-0 right-0 z-50 bg-[var(--color-background)]/95 backdrop-blur-sm">
  <div class="container-content">
    <div class="flex items-center justify-between h-20 border-b border-[var(--color-border)]">
      <!-- ロゴ -->
      <a href="/" class="flex items-center gap-2">
        <img
          src="/images/icon/icon-192.webp"
          alt=""
          class="h-8 w-8"
        />
        <span class="font-display text-xl tracking-wider">Text Pantry</span>
      </a>

      <!-- ナビゲーション -->
      <Navigation currentPath={currentPath} />

      <!-- モバイルメニューボタン -->
      <button
        type="button"
        class="md:hidden p-2 -mr-2"
        aria-label="メニューを開く"
        id="mobile-menu-button"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1.5"
            d="M4 6h16M4 12h16M4 18h16"
          />
        </svg>
      </button>
    </div>
  </div>

  <!-- モバイルメニュー -->
  <div
    id="mobile-menu"
    class="hidden md:hidden bg-[var(--color-background)] border-b border-[var(--color-border)]"
  >
    <nav class="container-content py-6">
      <ul class="flex flex-col gap-4">
        <li>
          <a
            href="/"
            class:list={[
              "block py-2 text-lg",
              currentPath === "/" ? "font-medium" : "text-[var(--color-muted-foreground)]",
            ]}
          >
            ホーム
          </a>
        </li>
        <li>
          <a
            href="/staff/"
            class:list={[
              "block py-2 text-lg",
              currentPath.startsWith("/staff") ? "font-medium" : "text-[var(--color-muted-foreground)]",
            ]}
          >
            スタッフ
          </a>
        </li>
        <li>
          <a
            href="/works/"
            class:list={[
              "block py-2 text-lg",
              currentPath.startsWith("/works") ? "font-medium" : "text-[var(--color-muted-foreground)]",
            ]}
          >
            仕事一覧
          </a>
        </li>
        <li>
          <a
            href="/contact/"
            class:list={[
              "block py-2 text-lg",
              currentPath.startsWith("/contact") ? "font-medium" : "text-[var(--color-muted-foreground)]",
            ]}
          >
            お問い合わせ
          </a>
        </li>
      </ul>
    </nav>
  </div>
</header>

<!-- ヘッダー分のスペーサー -->
<div class="h-20" aria-hidden="true"></div>

<script>
  const button = document.getElementById("mobile-menu-button");
  const menu = document.getElementById("mobile-menu");

  button?.addEventListener("click", () => {
    const isOpen = !menu?.classList.contains("hidden");
    menu?.classList.toggle("hidden");
    button.setAttribute("aria-expanded", String(!isOpen));
  });
</script>
